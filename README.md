# WhatsApp Bot с интеграцией Google Sheets

Этот проект представляет собой бота для WhatsApp, который интегрируется с Google Sheets для автоматизации бизнес-процессов. Бот может быть полезен для ресторанов, магазинов и других предприятий сферы услуг.

## Возможности

- Автоматическая обработка заказов через WhatsApp
- Хранение данных клиентов в Google Sheets
- Отслеживание статуса заказов
- Простой интерфейс для взаимодействия с клиентами

## Требования

- Node.js 14.x или выше
- Аккаунт Google для доступа к Google Sheets API
- Смартфон с установленным WhatsApp для сканирования QR-кода

## Установка

1. Клонируйте репозиторий:

   ```
   git clone https://github.com/your-username/whatsapp-sheet-bot.git
   cd whatsapp-sheet-bot
   ```

2. Установите зависимости:

   ```
   npm install
   ```

3. Настройте Google Sheets API:

   - Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
   - Создайте новый проект
   - Включите Google Sheets API
   - Создайте учетные данные (OAuth 2.0)
   - Скачайте файл с учетными данными и сохраните его как `credentials.json` в корневой папке проекта

4. Создайте Google Таблицу:

   - Создайте новую таблицу в Google Sheets
   - Создайте два листа: "Клиенты" и "Заказы"
   - В листе "Клиенты" создайте заголовки: "Телефон", "Имя", "Компания"
   - В листе "Заказы" создайте заголовки: "Телефон", "Клиент", "Заказ", "Дата", "Статус"
   - Скопируйте ID таблицы из URL (часть между /d/ и /edit)

5. Настройте переменные окружения:

   - Создайте файл `.env` в корневой папке проекта
   - Добавьте следующие строки:
     ```
     SPREADSHEET_ID=ваш_идентификатор_таблицы
     PORT=3000
     ```

6. Получите токен авторизации Google API:
   - Запустите скрипт для получения токена:
     ```
     node getToken.js
     ```
   - Перейдите по ссылке, которая будет выведена в консоль
   - Авторизуйтесь в своем аккаунте Google
   - Скопируйте полученный код и вставьте его в консоль
   - Токен будет сохранен в файл `token.json`

## Запуск

1. Запустите бота:

   ```
   node index.js
   ```

2. Отсканируйте QR-код в терминале с помощью WhatsApp на вашем телефоне:

   - Откройте WhatsApp
   - Нажмите на три точки в правом верхнем углу
   - Выберите "WhatsApp Web"
   - Отсканируйте QR-код

3. Бот готов к использованию!

## Использование

Клиенты могут взаимодействовать с ботом, отправляя следующие команды:

- **привет** или **начать** - начало работы с ботом
- **заказ [детали заказа]** - оформление нового заказа
- **статус** - проверка статуса заказов
- **регистрация [Имя] [Компания]** - регистрация нового клиента
- **помощь** - получение справки по командам

## Структура проекта

- `index.js` - основной файл приложения
- `googleSheets.js` - функции для работы с Google Sheets API
- `botHandlers.js` - обработчики команд бота
- `getToken.js` - скрипт для получения токена авторизации Google API
- `credentials.json` - учетные данные Google API (не включены в репозиторий)
- `token.json` - токен доступа к Google API (генерируется автоматически)

## Дополнительная настройка

### Настройка автоматического запуска

Для запуска бота в фоновом режиме можно использовать PM2:

```
npm install -g pm2
pm2 start index.js --name whatsapp-bot
pm2 save
pm2 startup
```

### Настройка HTTPS

Для продакшн-окружения рекомендуется настроить HTTPS. Можно использовать Nginx в качестве обратного прокси.

## Лицензия

MIT

## Автор

Ваше имя
